(library
  (name wayland_protocols)
  (public_name wayland.protocols)
  (libraries wayland))

(rule
 (targets xdg_shell_client.ml xdg_shell_server.ml xdg_shell_proto.ml)
 (deps   xdg-shell.xml)
 (action (run %{bin:wayland-scanner-ocaml} --open Wayland.Wayland_proto %{deps})))

(rule
 (targets gtk_primary_selection_client.ml gtk_primary_selection_server.ml gtk_primary_selection_proto.ml)
 (deps   gtk-primary-selection.xml)
 (action (run %{bin:wayland-scanner-ocaml} --open Wayland.Wayland_proto %{deps})))

(rule
 (targets xdg_output_unstable_v1_client.ml xdg_output_unstable_v1_server.ml xdg_output_unstable_v1_proto.ml)
 (deps   xdg-output-unstable-v1.xml)
 (action (run %{bin:wayland-scanner-ocaml} --open Wayland.Wayland_proto %{deps})))

(rule
 (targets xdg_decoration_unstable_v1_client.ml xdg_decoration_unstable_v1_server.ml xdg_decoration_unstable_v1_proto.ml)
 (deps   xdg-decoration-unstable-v1.xml)
 (action (run %{bin:wayland-scanner-ocaml} --open Wayland.Wayland_proto,Xdg_shell_proto %{deps})))
